<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% set siteHost = app.request.server.get('HTTP_HOST') %}
    {% set siteUrl = app.request.schemeAndHttpHost %}
    {% set siteName = 'Web3 Blog' %}
    {% set orgName = 'Web3main LLC' %}
    {% set orgEmail = 'info@' ~ siteHost %}
    {% set orgPhone = '+123 456 78900' %}
    {% set orgLogo = siteUrl ~ '/storage/blog_images/logo.png' %}
    {% set canonicalUrl = siteUrl ~ app.request.requestUri %}
    {% set metaTitle %}{% block meta_title %}{{ block('title') }}{% endblock %}{% endset %}
    {% set metaDescription %}{% block meta_description %}Stay updated with the latest trends in Web3 development, software engineering tips, and best coding practices for modern applications.{% endblock %}{% endset %}
    {% set metaImage %}{% block meta_image %}{{ orgLogo }}{% endblock %}{% endset %}
    {% set ogType %}{% block og_type %}website{% endblock %}{% endset %}

    <meta name="description" content="{{ metaDescription|trim }}">
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1">
    <meta name="author" content="{{ orgName }}">
    <meta name="_token" content="{{ csrf_token('post-like') }}">

    <title>{% block title %}Web3 Blog{% endblock %}</title>

    <link rel="canonical" href="{{ canonicalUrl }}">
    <link rel="alternate" hreflang="en" href="{{ canonicalUrl }}">
    <link rel="alternate" hreflang="x-default" href="{{ canonicalUrl }}">

    <meta property="og:site_name" content="{{ siteName }}">
    <meta property="og:type" content="{{ ogType|trim }}">
    <meta property="og:title" content="{{ metaTitle|trim }}">
    <meta property="og:description" content="{{ metaDescription|trim }}">
    <meta property="og:url" content="{{ canonicalUrl }}">
    <meta property="og:image" content="{{ metaImage|trim }}">
    <meta property="og:locale" content="en_US">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ metaTitle|trim }}">
    <meta name="twitter:description" content="{{ metaDescription|trim }}">
    <meta name="twitter:image" content="{{ metaImage|trim }}">

    <script type="application/ld+json">
        {{ {
            '@context': 'https://schema.org',
            '@type': 'Organization',
            'name': orgName,
            'url': siteUrl,
            'logo': orgLogo,
            'email': orgEmail,
            'telephone': orgPhone,
            'sameAs': ['https://t.me/+17JT99yABvI0OGZi'],
            'contactPoint': [{
                '@type': 'ContactPoint',
                'telephone': orgPhone,
                'email': orgEmail,
                'contactType': 'customer support',
                'areaServed': 'Worldwide',
                'availableLanguage': ['English']
            }]
        }|json_encode(constant('JSON_UNESCAPED_SLASHES') b-or constant('JSON_UNESCAPED_UNICODE'))|raw }}

    </script>
    <script type="application/ld+json">
        {{ {
            '@context': 'https://schema.org',
            '@type': 'WebSite',
            'name': siteName,
            'url': siteUrl,
            'publisher': {
                '@type': 'Organization',
                'name': orgName,
                'logo': {
                    '@type': 'ImageObject',
                    'url': orgLogo
                }
            },
            'inLanguage': 'en',
            'potentialAction': {
                '@type': 'SearchAction',
                'target': siteUrl ~ path('search') ~ '?q={search_term_string}',
                'query-input': 'required name=search_term_string'
            }
        }|json_encode(constant('JSON_UNESCAPED_SLASHES') b-or constant('JSON_UNESCAPED_UNICODE'))|raw }}

    </script>

    {% block head_extra %}{% endblock %}

    <!-- Tailwind CSS v4 -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <!-- Common CSS from Laravel -->
    <link rel="stylesheet" href="/css/front.css">

    <!-- Lazy Load CSS -->
    <link rel="stylesheet" href="/css/lazy-load.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
          media="print" onload="this.media='all'"/>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">

    {% block stylesheets %}{% endblock %}
</head>

<body class="bg-gray-900 text-gray-100">
<!-- Navigation -->
<nav class="bg-gray-800 border-b border-gray-700 sticky top-0 z-50">
    <div class="container mx-auto px-4 py-2 relative flex items-center justify-between">
        <!-- Logo -->
        <a class="flex-shrink-0" href="/">
            <img src="/storage/blog_images/logo.png" alt="Wiki BWP resource" loading="lazy" class="h-10">
        </a>

        <!-- Burger button (mobile only) -->
        <button class="md:hidden px-2 py-1 border border-gray-600 rounded text-gray-300 hover:bg-gray-700"
                type="button" onclick="toggleMenu()">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                      stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
        </button>

        <div id="navbarMenu"
             class="hidden md:flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 absolute sm:static top-full left-0 right-0 bg-gray-800 sm:bg-transparent p-4 sm:p-0 shadow sm:shadow-none text-center mx-3">
            <a class="text-gray-300 hover:text-blue-400 font-medium" href="/">Homepage</a>
            <a class="text-gray-300 hover:text-blue-400 font-medium" href="{{ path('search') }}">Search</a>
            <a class="text-gray-300 hover:text-blue-400 font-medium" href="/contacts/">Contacts</a>

            {% if app.user %}
                {% if is_granted('ROLE_ADMIN') %}
                    <a class="text-gray-300 hover:text-blue-400 font-medium" href="{{ path('admin_dashboard') }}">Admin
                        Panel</a>
                {% endif %}
                <a class="text-gray-300 hover:text-blue-400 font-medium" href="{{ path('app_logout') }}">Logout</a>
            {% else %}
                <a class="text-gray-300 hover:text-blue-400 font-medium" href="{{ path('app_login') }}">Login</a>
            {% endif %}

            <form class="relative w-full md:w-auto" role="search" method="POST" action="{{ path('search') }}">
                <input type="hidden" name="_token" value="{{ csrf_token('search') }}">
                <input class="pl-8 pr-4 py-1 border border-gray-600 bg-gray-700 text-gray-100 rounded-full text-sm
                     focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                       type="text" placeholder="Search..." name="q">
                <svg xmlns="http://www.w3.org/2000/svg"
                     width="16" height="16"
                     class="h-4 w-4 absolute left-2.5 top-2 text-gray-400"
                     fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
            </form>
        </div>
    </div>

    <script>
        function toggleMenu() {
            document.getElementById('navbarMenu').classList.toggle('hidden')
        }
    </script>
</nav>

<!-- Main Content -->
<div class="bg-gray-900 mt-6">
    <div class="container mx-auto px-4 max-w-7xl">
        <div class="flex flex-wrap">
            {% block content %}{% endblock %}
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-gray-800 text-white pt-12 mt-12 border-t border-gray-700">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- About Section -->
            <div>
                <div class="mb-4">
                    <img src="/storage/blog_images/footer-logo.png" alt="" loading="lazy" class="h-12">
                </div>
                <p class="text-gray-300 mb-4">
                    Stay updated with the latest trends in Web3 development, software engineering tips, and best coding
                    practices for modern applications.
                </p>
                <div>
                    <h4 class="text-lg font-semibold uppercase mb-2">Contact Info</h4>
                    <p class="text-gray-300 mb-1">10 Rustaveli Avenue, Tbilisi, Georgia</p>
                    <p class="text-gray-300 mb-1">Phone: +123 456 78900</p>
                    <p class="text-gray-300">info@{{ app.request.server.get('HTTP_HOST') }}</p>
                </div>
            </div>

            <!-- Testimonials -->
            <div>
                <h3 class="text-lg font-semibold uppercase mb-4">Testimonials</h3>
                <div class="bg-gray-700 p-4 rounded">
                    <div class="text-gray-300 italic mb-4">
                        <p>A very good website, it really helped a lot!</p>
                    </div>
                    <div class="flex items-center">
                        <img src="/storage/blog_images/author.png" alt="" loading="lazy"
                             class="w-10 h-10 rounded-full mr-3">
                        <div>
                            <h4 class="font-semibold">Sophia</h4>
                            <p class="text-sm text-gray-400">Client, Tech</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Custom Post Section -->
            <div>
                <h3 class="text-lg font-semibold uppercase mb-4">Custom Category Post</h3>
                {% if customCategoryPost %}
                    <div class="flex items-start">
                        <div class="flex-shrink-0 mr-3">
                            <a href="{{ path('post_show', {slug: customCategoryPost.slug}) }}">
                                <img src="{{ customCategoryPost.image }}" alt="{{ customCategoryPost.title|e }}"
                                     loading="lazy" class="w-20 h-20 object-cover rounded">
                            </a>
                        </div>
                        <div>
                            <a href="{{ path('post_show', {slug: customCategoryPost.slug}) }}"
                               class="text-white hover:text-blue-300 font-medium">
                                {{ customCategoryPost.title }}
                            </a>
                            <p class="text-sm text-gray-400 mt-1">{{ customCategoryPost.formattedDate }}</p>
                        </div>
                    </div>
                {% else %}
                    <p class="text-sm text-gray-400">No published posts yet.</p>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Copyright -->
    <div class="py-4 mt-8 bg-gray-900">
        <div class="container mx-auto px-4">
            <div class="text-center text-gray-400">
                &copy; 2019-{{ "now"|date("Y") }} <a href="#" class="hover:text-white">Web3 blog, </a> Designed with
                <i class="fas fa-heart text-red-500"></i> and <a href="#" class="hover:text-white">Symfony 7</a>
            </div>
        </div>
    </div>
</footer>

<!-- JavaScript from Laravel -->
<script src="/js/front.js" defer></script>
<script src="/js/lazy-load.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js" defer></script>

{% block javascripts %}{% endblock %}
</body>
</html>
