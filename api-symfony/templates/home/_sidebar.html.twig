<div class="w-full md:w-1/4">
    <div class="sticky top-4 space-y-3">

        <!-- Categories Widget -->
        <div class="bg-gray-800 rounded-lg shadow-sm overflow-hidden border border-gray-700 p-4">
            <h3 class="text-lg font-semibold text-center mb-4 text-gray-100">Categories</h3>
            <ul class="space-y-2">
                {% for category_data in categories %}
                    {% set category = category_data[0] %}
                    {% set posts_count = category_data.posts_count %}
                    <li class="border-b border-gray-700 pb-2 last:border-0 last:pb-0">
                        <a href="/category/{{ category.slug }}"
                           class="text-gray-300 hover:text-blue-400 transition flex justify-between">
                            <span class="text-sm">{{ category.title }}</span>
                            <span class="text-gray-500 text-sm">({{ posts_count }})</span>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Featured Posts Widget -->
        <div class="bg-gray-800 rounded-lg shadow-sm overflow-hidden border border-gray-700 p-4">
            <h3 class="text-lg font-semibold text-center mb-4 text-gray-100">Featured Posts</h3>

            <div class="space-y-4">
                {% for post in featuredPosts %}
                    <div class="flex space-x-3">
                        <div class="flex-shrink-0 w-20 h-20 relative group">
                            <a href="{{ path('post_show', {slug: post.slug}) }}" class="block w-full h-full">
                                <img src="{{ post.image }}" alt="" loading="lazy"
                                     class="w-full h-full object-cover rounded">
                                <div
                                    class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity rounded"></div>
                            </a>
                        </div>
                        <div>
                            <a href="{{ path('post_show', {slug: post.slug}) }}"
                               class="font-medium text-gray-200 hover:text-blue-400 transition text-sm block mb-1">
                                {{ post.title }}
                            </a>
                            <span class="text-xs text-gray-400">{{ post.formattedDate }}</span>
                            <div class="text-xs text-gray-400">
                                {{ post.description|raw }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Recent Posts Widget -->
        <div class="bg-gray-800 rounded-lg shadow-sm overflow-hidden border border-gray-700 p-4">
            <h3 class="text-lg font-semibold text-center mb-4 text-gray-100">Recent Posts</h3>
            <div class="space-y-4">
                {% for post in recentPosts %}
                    <div class="flex space-x-3">
                        <div class="flex-shrink-0 w-20 h-20 relative group">
                            <a href="{{ path('post_show', {slug: post.slug}) }}" class="block w-full h-full">
                                <img src="{{ post.image }}" alt="" loading="lazy"
                                     class="w-full h-full object-cover rounded">
                                <div
                                    class="absolute inset-0 bg-black bg-opacity-40 opacity-0 group-hover:opacity-100 transition-opacity rounded"></div>
                            </a>
                        </div>
                        <div>
                            <a href="{{ path('post_show', {slug: post.slug}) }}"
                               class="font-medium text-gray-200 hover:text-blue-400 transition text-sm block mb-1">{{ post.title }}</a>
                            <span class="text-xs text-gray-400">{{ post.formattedDate }}</span>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
